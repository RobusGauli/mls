# This is a weird way of telling Travis to use the fast container-based test
# runner instead of the slow VM-based runner.
sudo: false

language: go

go:
  - 1.8.x
  - master

# Skip the install step. Don't `go get` dependencies. Only build with the code
# in vendor/
install: true

# script always runs to completion (set +e). If we have linter issues AND a 
# failing test, we want to see both.
script:
  # Run a bunch of code checkers/linters in parallel
  - golint ./...       

  # Run all the tests with the race detector enabled. 
  # Skip the vendor dir and print the test coverage.
  - go test -v -race -cover -timeout 30s $(go list ./... | grep -v /vendor/)  